#####http请求

- HTTP是无连接：无连接的含义是限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间。
- HTTP是媒体独立的：这意味着，只要客户端和服务器知道如何处理的数据内容，任何类型的数据都可以通过HTTP发送。客户端以及服务器指定使用适合的MIME-type内容类型。
- HTTP是无状态：HTTP协议是无状态协议。无状态是指协议对于事务处理没有记忆能力。缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能导致每次连接传送的数据量增大。另一方面，在服务器不需要先前信息时它的应答就较快。

一个HTTP请求报文由请求行（request line）、请求头（header）、空行和请求数据4个部分组成。

```ja
POST /login.php HTTP/1.1        //请求行
HOST: www.jiejieyh.cn            //请求头
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.116 Safari/537.36
                                //空白行，代表请求头结束
Username=admin&password=12345    //请求正文

```

#####请求行

请求行由请求方法字段、URL字段和HTTP协议版本字段3个字段组成，它们用空格分隔。

1. 第一部分说明了该请求是POST请求
2. 第二部分说明请求的是该域名根目录下的login.php
3. 第三部分说明使用的HTTP协议版本

根据HTTP标准，HTTP请求可以使用多种请求方法。
HTTP1.0定义了三种请求方法： GET, POST 和 HEAD方法。
HTTP1.1新增了五种请求方法：OPTIONS, PUT, DELETE, TRACE 和 CONNECT 方法

####请求头

请求头部由关键字/值对组成，每行一对，关键字和值用英文冒号“:”分隔。请求头部通知服务器有关于客户端请求的信息，典型的请求头有：

- User-Agent：产生请求的浏览器类型。
- Accept：用于指定客户端接收那些MIME类型的信息，如Accept:text/html,表明客户端希望接收HTML文本。
- Accept-Charset：用于指定客户端接收的字符集例如：Accept-Charset:utf-8,gb2312。如果在请求消息中没有设置这个域，默认是任何字符集都可以接收。
- Referer：Referer包含一个URL，代表当前访问的URL的上一个URL,也就是说用户是从什么地方来到本页面。
  Referer:www.jiejieyh.cn/register.php
- Cookie：Cookie是非常重要的请求头，它是一段文本，常用来表示请求者的身份等。
- Range可以请求实体的部分内容，多线程下载一定会用到此请求头。例如：
  - 表示头500个字节：bytes=0~499
  - 表示第二个500字节：bytes=500~999
  - 表示最后500字节：bytes=-500
  - 表示500字节以后的范围：bytes=500-
- x-forward-for：即XXF头，它代表请求端的IP,可以有多个，中间以逗号隔开
- Host：请求的主机名，允许多个域名同处一个IP地址，即虚拟主机。

最后一个请求头之后是一个空行，发送回车符和换行符，通知服务器以下不再有请求头。

######请求数据（正文）

请求数据不在GET方法中使用，而是在POST方法中使用。POST方法适用于需要客户填写表单的场合。与请求数据相关的最常使用的请求头是Content-Type和Content-Length。



#####状态码

Http的状态码由3位数字组成，第一位数字定义了响应的类别且有只有以下5种：

- 1xx:信息提示，表示请求已经被成功接收，继续处理。范围100-101
- 2xx:成功，服务器成功的处理了请求，范围200-206
- 3xx:重定向，重定向状态码用于告诉浏览器客户端，它访问的资源已被移动，并告诉客户端新的资源地址位置。这时浏览器将重新对新资源发起请求。范围300-305
- 4xx:客户端错误码，有时候客户端会发送一些服务器无法处理的东西，比如格式错误的请求，请求一个不存在的url...其范围是400-415
- 5xx:客户端发送的请求有效，服务器自身出错了，5xx就是用来描述服务器内部错误的，范围500-505

#####常见状态码

- 200：客户端请求成功
- 302：重定向
- 404:请求的资源不存在
- 401:请求未经授权
- 500:服务器内部错误
- 503:服务器当前不能处理客户端的请求，一段时间后可能恢复正常

#####响应头

1. Server：服务器所使用的Web服务器名称，如Server:Apache/1.3.6(Unix),攻击者可以通过此头探测Web服务器名称。建议在服务器端进行修改此头的信息
2. Set-Cookie：向客户端设置Cookie,通过查看此头可以清楚地看到服务器向客户端发送的Cookie信息
3. Last-Modified：服务器通过这个头告诉浏览器，资源最后修改时间
4. Location：服务器通过这个头告诉浏览器去访问哪个页面，浏览器接收到这个响应之后，通常会立刻访问Location头所指向的页面。这个头通常配合302状态码使用。
5. Refresh：服务器通过Refresh头告诉浏览器定时刷新浏览器

#####实体头

请求和响应消息都可以传送一个实体头。实体头定义了关于实体正文和请求所标识的资源的元信息。元信息也就是实体内容的属性，包括实体信息类型、长度、压缩方法、最后一次修改时间等。

1. Content-Type：用于向接收方指定实体的介质类型。
2. Content-Encoding：用作媒体类型的修饰符，它的值指示了已经被应用到实体正文的附加内容编码，因而要获得Content-Type报头域中所引用的媒体类型，必须采用相应的解码机制。
3. Content-Length：用于指明实体正文的长度，以字节方式存储的十进制数字来表示。
4. Last-Modified：用于指示资源的最后修改日期和时间。